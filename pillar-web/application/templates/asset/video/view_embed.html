{% block header_items %}
<link rel="stylesheet" href="//releases.flowplayer.org/6.0.3/skin/functional.css"/>{% endblock %}
{% block body %}
<div id="asset-container">
  <section class="asset-preview video">
    <div id="flowplayer_container"></div>
  </section>
  <section class="asset-details-container">
    <h2 class="asset-title">{{node.name}}</h2>
    <div class="asset-description">{{node.description|safe}}</div>
    <div class="asset-meta">{{node.file.length | filesizeformat}}</div>
  </section>
</div>{% endblock %}
{% block footer_scripts %}
<script>
  // Move the script to layout.jade to prevent using getScript everyitme
  $.getScript("//releases.flowplayer.org/6.0.3/flowplayer.min.js", function() {
  	// select the above element as player container
  	var container = document.getElementById("flowplayer_container");
  
  	// install flowplayer into selected container
  	flowplayer(container, {
  		splash: true,
  			clip: {
  				sources: {{ node.video_sources | safe }}
  				// [
  				//   { type: "application/x-mpegurl",
  				//     src:  "//stream.flowplayer.org/functional.m3u8" },
  				//   { type: "video/webm",
  				//     src:  "//stream.flowplayer.org/functional.webm" },
  				//   { type: "video/mp4",
  				//     src:  "//stream.flowplayer.org/functional.mp4"  }
  				// ]
  			}
  	});
  });
  
</script>{% endblock %}