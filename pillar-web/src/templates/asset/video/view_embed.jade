| {% block header_items %}
link(rel="stylesheet", href="//releases.flowplayer.org/6.0.3/skin/functional.css")
| {% endblock %}

| {% block body %}

#asset-container
	section.asset-preview.video
		#flowplayer_container.is-splash(style="background-image:url({{node.picture}});")

	section.asset-details-container

		.asset-details-header
			.asset-title
				| {{node.name}}

		.asset-details-description
			| {{node.description|safe}}

		.asset-details-meta

			ul.asset-details-meta-list
				li.asset-details-meta-list-item.status
						| {{node.properties.status}}

				li.asset-details-meta-list-item
					| {{ node._created }}

				li.btn-group.asset-details-meta-list-item.download
					button.btn.btn-default.dropdown-toggle(
						type="button",
						data-toggle="dropdown",
						aria-haspopup="true",
						aria-expanded="false")

						| Download
						i.fa.fa-angle-down

					ul.dropdown-menu
						| {% for child in node.file_children._items %}
						li
							a(href="{{ child.link }}",
								title="{{ child.length | filesizeformat }}")
								span.length {{ child.length | filesizeformat }}

								span.format {{ child.format }}
								span.size {{ child.size }}

						| {% endfor %}

	section.debug.hidden
		| {{ node.to_dict() }}

| {% endblock %}

| {% block footer_scripts %}

script.
	// Move the script to layout.jade to prevent using getScript everyitme
	$.getScript("//releases.flowplayer.org/6.0.3/flowplayer.min.js", function() {
		// select the above element as player container
		var container = document.getElementById("flowplayer_container");

		// install flowplayer into selected container
		flowplayer(container, {
			splash: true,
				clip: {
					sources: {{ node.video_sources | safe }}
					// [
					//   { type: "application/x-mpegurl",
					//     src:  "//stream.flowplayer.org/functional.m3u8" },
					//   { type: "video/webm",
					//     src:  "//stream.flowplayer.org/functional.webm" },
					//   { type: "video/mp4",
					//     src:  "//stream.flowplayer.org/functional.mp4"  }
					// ]
				}
		});
	});

| {% endblock %}
